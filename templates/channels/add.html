{% extends "base.html" %}

{% block title %}Add Channel - Telegram System{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">Add Channel or Group</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <i class="bi bi-info-circle"></i>
                    <strong>Info:</strong> The system will automatically fetch channel details using Telegram API.
                </div>

                <form method="POST" action="{{ url_for('channels.add') }}">
                    <div class="mb-3">
                        <label for="username" class="form-label">Channel Username or Link *</label>
                        <input type="text" class="form-control" id="username" name="username" 
                               placeholder="@channel_username or t.me/channel_username" required>
                        <small class="form-text text-muted">
                            Enter username (with or without @) or full Telegram link
                        </small>
                    </div>

                    <div class="mb-3">
                        <label for="account_id" class="form-label">Account to Use *</label>
                        <select class="form-select" id="account_id" name="account_id" required>
                            <option value="">-- Select Account --</option>
                            {% for account in accounts %}
                            <option value="{{ account.id }}">
                                {{ account.phone }}
                                {% if account.proxy %}(with proxy){% endif %}
                            </option>
                            {% endfor %}
                        </select>
                        <small class="form-text text-muted">
                            This account will be used to fetch channel info. Must have access to the channel.
                        </small>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-plus-circle"></i> Add Channel
                        </button>
                        <a href="{{ url_for('channels.list_channels') }}" class="btn btn-outline-secondary">
                            Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">Requirements</h5>
            </div>
            <div class="card-body">
                <ul>
                    <li>The account must be a member of the channel/group</li>
                    <li>For admin features (posting), account must have admin rights</li>
                    <li>Public channels can be added by username</li>
                    <li>Private channels require account membership</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">What You Can Do</h5>
            </div>
            <div class="card-body">
                <h6>With Admin Rights:</h6>
                <ul>
                    <li><i class="bi bi-check-circle text-success"></i> Create and schedule posts</li>
                    <li><i class="bi bi-check-circle text-success"></i> Pin/unpin messages</li>
                    <li><i class="bi bi-check-circle text-success"></i> Delete messages</li>
                    <li><i class="bi bi-check-circle text-success"></i> View and manage members</li>
                </ul>

                <h6 class="mt-3">Without Admin Rights:</h6>
                <ul>
                    <li><i class="bi bi-check-circle text-info"></i> Use as invite target</li>
                    <li><i class="bi bi-check-circle text-info"></i> Parse members</li>
                    <li><i class="bi bi-check-circle text-info"></i> Monitor activity</li>
                </ul>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">Tips</h5>
            </div>
            <div class="card-body">
                <ul class="small">
                    <li>Add your own channels first to test features</li>
                    <li>For invite campaigns, you need admin rights in the target channel</li>
                    <li>Public channels are easier to add (just need username)</li>
                    <li>Keep track of which account has access to which channel</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
